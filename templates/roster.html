<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roster Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 min-h-screen p-6">

<div class="max-w-3xl mx-auto bg-gray-800 shadow-xl p-6 rounded-xl border border-gray-700">

    {% if error %}
        <p class="text-red-400 text-xl font-semibold mb-4">{{ error }}</p>
        <a href="/" class="text-indigo-400 hover:underline mt-4 block">← Back to Home</a>
    {% else %}
    
        <!-- HEADER -->
        <h1 class="text-3xl font-bold text-indigo-400 mb-4">
            Roster for {{ data.username }} — Season {{ data.season }}
        </h1>

        <p class="text-lg font-semibold text-gray-200 mb-2">{{ data.league.name }}</p>
        <p class="text-gray-400 mb-4">League ID: {{ data.league.league_id }}</p>

        <!-- POSITION GROUPS -->
        {% for pos, players in data.positions.items() %}
            {% if players %}

                <h2 class="text-xl font-bold mt-8 mb-3 text-indigo-300 border-b border-gray-700 pb-1 flex justify-between">
                    <span>{{ pos }}</span>
                    <span class="text-indigo-400 text-sm">
                        {{ data.totals[pos] }}
                    </span>
                </h2>

                <!-- ONE COLUMN ONLY, ULTRA SLIM CARDS -->
                <div class="flex flex-col gap-2">

                    {% for p in players %}
                        <div class="flex items-center gap-3 bg-gray-700 p-2 rounded-lg border border-gray-600 max-w-xs">

                            <!-- Small Headshot -->
                            <img src="{{ p.headshot }}" 
                                 class="w-8 h-8 rounded-full object-cover border border-gray-500">

                            <!-- Player Info -->
                            <div class="flex flex-col leading-tight">
                                <span class="text-gray-200 font-medium text-sm">{{ p.name }}</span>
                                <span class="text-gray-400 text-xs">{{ p.position }} — {{ p.team }}</span>

                                {% if p.ktc_value is not none %}
                                    <span class="text-indigo-300 text-xs font-semibold">
                                        KTC: {{ p.ktc_value }}
                                    </span>
                                {% endif %}
                            </div>


                        </div>
                    {% endfor %}

                </div>

            {% endif %}
        {% endfor %}

        <a href="/" class="text-indigo-400 hover:underline block mt-10">← Back to Home</a>

    {% endif %}

</div>

</body>
</html>
